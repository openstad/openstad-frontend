<div id="lightbox">
	<div id="lightbox-background" onclick="hideLightbox()"></div>
	<div id="lightbox-content">
		<div id="lightbox-image">
			<div class="image">
				<img src="/img/eberhardvanderlaan3/uploaded-image-background.png" class="image-background"/>
				<div class="image-upload"></div>
				<img src="/img/eberhardvanderlaan3/uploaded-image-foreground.png" class="image-foreground"/>
			</div>
		</div>
		<div id="lightbox-text">
			xx
		</div>
		<div id="lightbox-closebutton" onclick="hideLightbox();"></div>
	</div>
</div>

<script>

 function showLightbox(ideaId) {

	 var isPhone = document.querySelector('body').offsetWidth < 700; // isPhone - todo: betere afvanging
	 if (isPhone) return;

	 document.querySelector('#lightbox').style.display = 'block';

	 var width = Math.min(document.querySelector('#lightbox-content').offsetHeight - 40, 940);
	 var left  = ( document.querySelector('#lightbox').offsetWidth - width ) / 2;
	 document.querySelector('#lightbox-content').style.width = width + 'px';
	 document.querySelector('#lightbox-content').style.left = left  + 'px';

	 document.querySelector('#lightbox-image').style.height = width + 'px';

	 document.getElementsByTagName("BODY")[0].style.overflow = 'hidden';

	 updateLightbox(ideaId);

 }

 function hideLightbox() {
	 document.querySelector('#lightbox').style.display = 'none';
	 document.getElementsByTagName("BODY")[0].style.overflow = 'auto';
 }

 function updateLightbox(ideaId) {

	 let ideaElem = document.querySelector('#idea-' + ideaId);
	 document.querySelector('#lightbox-image').querySelector('.image-upload').src = ideaElem.querySelector('.image-upload').src;
	 document.querySelector('#lightbox-text').innerHTML = ideaElem.querySelector('h3').innerHTML;

	 doShowImage(ideaId, document.querySelector('#lightbox-image'));

 }

 window.addEventListener('keydown', function(event) {
   let which = (event) ? event.which : window.event.keyCode;
   if (which == 27) {
     hideLightbox();
   }
	 
 }, false)

</script>
