<script>
 // vote-creator - config
 // todo: dit moet - hence de naam - naar de config
 //
 var userIsLoggedIn = {{true if data.loggedIn else false}};
 var userHasVoted = {{true if data.loggedIn else false}};
 var currentUrl = '{{data.currentUrl}}';
 var loginUrl = '/oauth/login';
 var returnToKey = 'returnTo';
 var selectionError = '{{data.widget.no_selection_error}}';

 var steps = [{

	 barId: 'steps-bar-1',
	 contentId: 'steps-content-1a',
	 validate: function(showError) {
		 if ( document.querySelector('input[name=ideaId]').value ) {
			 return true;
		 } else {
			 if (showError) {
         $('.preview-container').addClass('form-error').attr('data-content', selectionError);
			 }
			 return false;
		 }
	 }

 },{

	 barId: 'steps-bar-2',
	 contentId: 'steps-content-2a',
	 validate: function(showError) {
     isValid = userIsLoggedIn;
		 return isValid;
	 },
   doBeforeShow: function() {
     $('#vote-creator').find('.vote-logged-in, .vote-not-logged-in').hide();

     if (userIsLoggedIn) {
       $('#vote-creator').find('.vote-logged-in').show();
     } else {
       $('#vote-creator').find('.vote-not-logged-in').show();
     }
   },
	 doBeforeNext: function() {
		 sendVote();
	 }

 },{

	 barId: 'steps-bar-3',
	 contentId: 'steps-content-3a',
	 doBeforeShow: function() {
		 //document.querySelector('#showZipCode3a').innerHTML = document.querySelector('input[name=zipCode]').value;
		 //document.querySelector('#showEmail3a').innerHTML = document.querySelector('input[name=email]').value;
	 }

 }];

</script>
