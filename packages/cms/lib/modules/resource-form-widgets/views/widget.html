{% set pageTitle = 'Jouw plan insturen' %}
{% set activeResource = data.activeResource %}

{% if data.widget.editorDescription %}
{% set useModernEditor = true %}
{% else %}
{% set useModernEditor = false %}
{% endif %}

<div class="pageContent newactiveResource" id="content">

	{% if data.openstadUser.role === 'anonymous'%}
	<div class="box-grey">
		<h1>{% if data.widget.noAnonymousAllowedText %} {{ data.widget.noAnonymousAllowedText | sanitize | safe }} {% else %} Anonieme gebruikers kunnen geen plannen indienen {% endif %}</h1>
		<p>Klik <a href="{{data.siteUrl}}/oauth/login">hier</a> om in te loggen met een ander account.</p>
	</div>

	{% elseif not data.widget.showForm %}
	<div class="box-grey">
		<h1>{% if data.widget.loginText %} {{ data.widget.loginText | sanitize | safe }} {% else %} Om een plan in te dienen moet je ingelogd zijn.{% endif %}</h1>
		<p>Klik <a href="{{data.siteUrl}}/oauth/login">hier</a> om in te loggen.</p>
	</div>
	{% elseif data.widget.showForm %}
		<div  id="formulier-block">
			{% if data.widget.formType === 'dynamic' %}
			{% include 'includes/dynamic-form.html' %}
			{% else %}
			{% include 'includes/static-'+ data.widget.resource + '-form.html' ignore missing %}
			{% endif %}
		</div>
	 {% endif %}
</div>
<script>
	var titleMinLength = parseInt('{{data.widget.resourceConfig.titleMinLength}}');
  var titleMaxLength = parseInt('{{data.widget.resourceConfig.titleMaxLength}}');
  var summaryMinLength = parseInt('{{data.widget.resourceConfig.summaryMinLength}}');
  var summaryMaxLength = parseInt('{{data.widget.resourceConfig.summaryMaxLength}}');
  var descriptionMinLength = parseInt('{{data.widget.resourceConfig.descriptionMinLength}}');
  var descriptionMaxLength = parseInt('{{data.widget.resourceConfig.descriptionMaxLength}}');
</script>

<script src="{{data.siteUrl}}/modules/openstad-assets/js/vendor/trix.js"></script>
{#
	<script src="{{data.siteUrl}}/modules/openstad-assets/js/vendor/browser-polyfill.min.js"></script>
#}
<script src="{{data.siteUrl}}/modules/openstad-assets/js/vendor/filepond-polyfill.min.js"></script>
<script src="{{data.siteUrl}}/modules/openstad-assets/js/vendor/filepond.js"></script>

<script src="{{data.siteUrl}}/modules/openstad-assets/js/vendor/filepond-plugin-image-preview.js"></script>
<script src="{{data.siteUrl}}/modules/openstad-assets/js/vendor/filepond-plugin-file-validate-type.js"></script>
<script src="{{data.siteUrl}}/modules/openstad-assets/js/vendor/filepond-plugin-file-validate-size.js"></script>
<script src="{{data.siteUrl}}/modules/openstad-assets/js/vendor/filepond-plugin-file-poster.js"></script>
<script src="{{data.siteUrl}}/modules/openstad-assets/js/vendor/filepond-plugin-image-exif-orientation.js"></script>
